
{% block content %}

<div class="container-fluid py-3">

  <!-- KPI CARDS -->
  <div class="row g-3 mb-3">
    <div class="col-6 col-md-3">
      <div class="card kpi blue">
        <small>Mauzo ya Leo</small>
        <h3>Tsh {{ sales_today }}</h3>
      </div>
    </div>
    <div class="col-6 col-md-3">
      <div class="card kpi green">
        <small>Mapato ya Leo</small>
        <h3>Tsh {{ revenue_today }}</h3>
      </div>
    </div>
    <div class="col-6 col-md-3">
      <div class="card kpi purple">
        <small>Faida ya Leo</small>
        <h3>Tsh {{ profit_today }}</h3>
      </div>
    </div>
    <div class="col-6 col-md-3">
      <div class="card kpi dark">
        <small>Bidhaa Zote</small>
        <h3>{{ total_products }}</h3>
      </div>
    </div>

    <div class="col-6 col-md-3">
      <div class="card kpi warning">
        <small>Stock Chini</small>
        <h3>{{ low_stock }}</h3>
      </div>
    </div>
    <div class="col-6 col-md-3">
      <div class="card kpi teal">
        <small>Gharama ya Stock</small>
        <h3>Tsh {{ stock_cost }}</h3>
      </div>
    </div>
    <div class="col-6 col-md-3">
      <div class="card kpi orange">
        <small>Mauzo ya Mwezi</small>
        <h3>Tsh {{ sales_month }}</h3>
      </div>
    </div>
    <div class="col-6 col-md-3">
      <div class="card kpi gray">
        <small>Watumiaji</small>
        <h3>{{ users_count }}</h3>
      </div>
    </div>
  </div>

  <!-- GRAPHS -->
  <div class="row g-3 mb-3">
    <div class="col-md-8">
      <div class="card p-3">
        <h6>Mauzo (Siku 7)</h6>
        <canvas id="salesChart"></canvas>
      </div>
    </div>
    <div class="col-md-4">
      <div class="card p-3">
        <h6>Bidhaa Zinazoongoza</h6>
        <canvas id="topProducts"></canvas>
      </div>
    </div>
  </div>

  <!-- QUICK ACTIONS -->
  <div class="row g-3 mb-3">
    <div class="col-6 col-md-3">
      <a href="/sales" class="btn btn-primary w-100">‚ûï Uza Bidhaa</a>
    </div>
    <div class="col-6 col-md-3">
      <a href="/add-product" class="btn btn-success w-100">‚ûï Ongeza Bidhaa</a>
    </div>
    <div class="col-6 col-md-3">
      <a href="/reports" class="btn btn-warning w-100">üìÑ Ripoti</a>
    </div>
    <div class="col-6 col-md-3">
      <a href="/settings" class="btn btn-dark w-100">‚öôÔ∏è Mipangilio</a>
    </div>
  </div>

</div>

<!-- CHART JS -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
const ctx = document.getElementById('salesChart');
new Chart(ctx, {
  type: 'line',
  data: {
    labels: {{ sales_labels|safe }},
    datasets: [{
      label: 'Mauzo',
      data: {{ sales_data|safe }},
      borderWidth: 2
    }]
  }
});

const ctx2 = document.getElementById('topProducts');
new Chart(ctx2, {
  type: 'bar',
  data: {
    labels: {{ top_labels|safe }},
    datasets: [{
      label: 'Qty',
      data: {{ top_data|safe }},
      borderWidth: 1
    }]
  }
});
</script>

{% endblock %}
