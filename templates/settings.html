{% extends "layout.html" %}
{% block content %}

<div class="container-fluid py-4">
    <div class="mb-4 text-white d-flex align-items-center">
        <div class="bg-primary p-3 rounded-4 me-3 shadow">
            <i class="bi bi-gear-fill fs-3 text-white"></i>
        </div>
        <div>
            <h2 class="fw-bold mb-0">Mipangilio ya Mfumo</h2>
            <p class="text-secondary small mb-0">Dhibiti biashara yako na usalama wa akaunti</p>
        </div>
    </div>

    {% with messages = get_flashed_messages(with_categories=true) %}
      {% if messages %}
        {% for category, message in messages %}
          <div class="alert alert-{{ category }} border-0 shadow-lg rounded-4 alert-dismissible fade show" role="alert">
            <i class="bi bi-info-circle-fill me-2"></i> {{ message }}
            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
          </div>
        {% endfor %}
      {% endif %}
    {% endwith %}

    <form action="/settings" method="POST" autocomplete="off" class="needs-validation" novalidate>
        <div class="row g-4">
            
            <div class="col-lg-7">
                <div class="card bg-dark text-white border-0 shadow-lg h-100" style="border-radius:25px; border: 1px solid #333 !important;">
                    <div class="card-body p-4">
                        <div class="d-flex align-items-center mb-4">
                            <span class="badge bg-warning text-dark me-2">01</span>
                            <h5 class="fw-bold text-warning mb-0">Taarifa za Biashara</h5>
                        </div>

                        <div class="mb-4">
                            <label class="form-label small text-secondary fw-bold">JINA LA BIASHARA / DUKA</label>
                            <div class="input-group">
                                <span class="input-group-text bg-light border-0"><i class="bi bi-shop"></i></span>
                                <input type="text" name="shop_name" class="form-control form-control-lg bg-light border-0" 
                                       value="{{ shop.shop_name }}" required>
                            </div>
                            <div class="form-text text-muted small mt-2">Jina hili litaonekana kwenye ripoti na risiti zako zote.</div>
                        </div>

                        <div class="mb-3">
                            <label class="form-label small text-secondary fw-bold">KAULI MBIU (SLOGAN)</label>
                            <input type="text" name="shop_slogan" class="form-control bg-light border-0" 
                                   placeholder="Mf: Sisi ni bora zaidi..." value="{{ shop.shop_slogan }}">
                        </div>
                    </div>
                </div>
            </div>

            <div class="col-lg-5">
                <div class="card bg-dark text-white border-0 shadow-lg h-100" style="border-radius:25px; border: 1px solid #333 !important;">
                    <div class="card-body p-4">
                        <div class="d-flex align-items-center mb-4">
                            <span class="badge bg-primary me-2">02</span>
                            <h5 class="fw-bold text-primary mb-0">Usalama wa Admin</h5>
                        </div>

                        <div class="mb-3">
                            <label class="form-label small text-secondary fw-bold">PASSWORD YA SASA</label>
                            <input type="password" name="current_password" class="form-control bg-light border-0" 
                                   placeholder="Lazima uweke ili kuhifadhi" required>
                        </div>

                        <hr class="my-4 border-secondary opacity-25">

                        <div class="mb-3">
                            <label class="form-label small text-secondary fw-bold">PASSWORD MPYA</label>
                            <input type="password" name="new_password" id="newPass" class="form-control bg-light border-0" 
                                   placeholder="Herufi 6+">
                        </div>

                        <div class="mb-3">
                            <label class="form-label small text-secondary fw-bold">THIBITISHA PASSWORD</label>
                            <input type="password" name="confirm_password" id="confirmPass" class="form-control bg-light border-0" 
                                   placeholder="Rudia tena">
                        </div>
                    </div>
                </div>
            </div>

            <div class="col-12 text-center mt-5">
                <div class="bg-dark p-3 rounded-pill d-inline-block shadow-lg border border-secondary border-opacity-25">
                    <button type="submit" class="btn btn-primary btn-lg px-5 rounded-pill fw-bold shadow-sm transition-all">
                        <i class="bi bi-cloud-arrow-up-fill me-2"></i>HIFADHI MABADILIKO
                    </button>
                </div>
                <p class="text-secondary small mt-3">
                    <i class="bi bi-info-circle me-1"></i> Mfumo utajisajili upya baada ya mabadiliko ya password
                </p>
            </div>
        </div>
    </form>
</div>

<style>
    .transition-all:hover { transform: scale(1.05); transition: 0.3s; }
    .bg-dark { background-color: #121212 !important; }
    .form-control:focus { box-shadow: 0 0 0 0.25rem rgba(13, 110, 253, 0.25); background-color: #f8f9fa !important; }
</style>

{% endblock %}

