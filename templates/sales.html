@sales.route("/", methods=["GET"])
def home():
    return redirect(url_for("auth.login")){% extends "layout.html" %}
{% block content %}
<div class="container-fluid py-4">
    <h2 class="fw-bold text-white mb-4">Ripoti Kamili ya Mauzo</h2>

    <div class="row g-3 mb-4">
        <div class="col-md-3">
            <div class="card bg-dark border-start border-primary border-4 p-3 rounded-4 shadow">
                <small class="text-secondary">MAUZO (MWEZI)</small>
                <h4 class="text-white fw-bold">Tsh {{ "{:,.0f}".format(stats.total_sales_month) }}</h4>
            </div>
        </div>
        <div class="col-md-3">
            <div class="card bg-dark border-start border-success border-4 p-3 rounded-4 shadow">
                <small class="text-secondary">FAIDA (MWEZI)</small>
                <h4 class="text-success fw-bold">Tsh {{ "{:,.0f}".format(stats.total_profit_month) }}</h4>
            </div>
        </div>
        <div class="col-md-3">
            <div class="card bg-dark border-start border-warning border-4 p-3 rounded-4 shadow">
                <small class="text-secondary">MAUZO LEO</small>
                <h4 class="text-warning fw-bold">Tsh {{ "{:,.0f}".format(stats.total_sales_today) }}</h4>
            </div>
        </div>
        <div class="col-md-3">
            <div class="card bg-dark border-start border-info border-4 p-3 rounded-4 shadow">
                <small class="text-secondary">IDADI YA MAUZO</small>
                <h4 class="text-info fw-bold">{{ stats.total_count }}</h4>
            </div>
        </div>
    </div>

    <div class="card bg-dark border-0 shadow-lg rounded-4 overflow-hidden">
        <div class="table-responsive">
            <table class="table table-dark table-hover mb-0">
                <thead class="text-secondary small">
                    <tr>
                        <th class="ps-4">MUDA</th>
                        <th>BIDHAA</th>
                        <th>BEI (NET)</th>
                        <th>FAIDA</th>
                        <th>MUUZAJI</th>
                    </tr>
                </thead>
                <tbody>
                    {% for s in sales %}
                    <tr>
                        <td class="ps-4 small text-secondary">{{ s.timestamp.strftime('%H:%M') }}</td>
                        <td class="fw-bold">{{ s.product_name }}</td>
                        <td>Tsh {{ "{:,.0f}".format(s.selling_price - s.discount) }}</td>
                        <td class="text-success fw-bold">+{{ "{:,.0f}".format(s.profit) }}</td>
                        <td><span class="badge bg-secondary opacity-50">{{ s.seller_name or 'Admin' }}</span></td>
                    </tr>
                    {% else %}
                    <tr><td colspan="5" class="text-center py-5 text-secondary">Hakuna mauzo yaliyopatikana.</td></tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
</div>
{% endblock %}

